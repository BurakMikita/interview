{"code":"(this[\"webpackJsonpmy-app\"]=this[\"webpackJsonpmy-app\"]||[]).push([[6],{348:function(e,t,c){\"use strict\";c.r(t);var n=c(6);var r=c(0),s=c.n(r),j=c(16),i=c(112),u=c(2),o=function(){var e=Object(j.c)(),t=Object(j.d)((function(e){return e.chat.status}));return Object(r.useEffect)((function(){return e(Object(i.c)()),function(){e(Object(i.d)())}}),[]),Object(u.jsxs)(\"div\",{children:[\"error\"===t&&Object(u.jsx)(\"div\",{children:\"Some error occured. Please refresh the page\"}),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(a,{}),Object(u.jsx)(l,{})]})]})},a=function(e){!function(e){if(null==e)throw new TypeError(\"Cannot destructure undefined\")}(e);var t=Object(j.d)((function(e){return e.chat.messages})),c=Object(r.useRef)(null),s=Object(r.useState)(!0),i=Object(n.a)(s,2),o=i[0],a=i[1];return Object(r.useEffect)((function(){var e;o&&(null===(e=c.current)||void 0===e||e.scrollIntoView({behavior:\"smooth\"}))}),[t]),Object(u.jsxs)(\"div\",{style:{height:\"400px\",overflowY:\"auto\"},onScroll:function(e){var t=e.currentTarget;Math.abs(t.scrollHeight-t.scrollTop-t.clientHeight)<300?!o&&a(!0):o&&a(!1)},children:[t.map((function(e,t){return Object(u.jsx)(b,{message:e},e.id)})),Object(u.jsx)(\"div\",{ref:c})]})},b=s.a.memo((function(e){var t=e.message;return console.log(\">>>>>>Message\"),Object(u.jsxs)(\"div\",{children:[Object(u.jsx)(\"img\",{src:t.photo,style:{width:\"30px\"}}),\" \",Object(u.jsx)(\"b\",{children:t.userName}),Object(u.jsx)(\"br\",{}),t.message,Object(u.jsx)(\"hr\",{})]})})),l=function(){var e=Object(r.useState)(\"\"),t=Object(n.a)(e,2),c=t[0],s=t[1],o=Object(j.c)(),a=Object(j.d)((function(e){return e.chat.status}));return Object(u.jsxs)(\"div\",{children:[Object(u.jsx)(\"div\",{children:Object(u.jsx)(\"textarea\",{onChange:function(e){return s(e.currentTarget.value)},value:c})}),Object(u.jsx)(\"div\",{children:Object(u.jsx)(\"button\",{disabled:\"ready\"!==a,onClick:function(){c&&(o(Object(i.b)(c)),s(\"\"))},children:\"Send\"})})]})};t.default=function(){return Object(u.jsx)(\"div\",{children:Object(u.jsx)(o,{})})}}}]);","name":"static/js/6.8e30e45b.chunk.js","map":{"version":3,"sources":["static/js/6.8e30e45b.chunk.js"],"names":["this","push","348","module","__webpack_exports__","__webpack_require__","r","slicedToArray","react","react_default","n","es","chat_reducer","jsx_runtime","ChatPage_Chat","dispatch","Object","status","state","chat","children","ChatPage_Messages","ChatPage_AddMessageForm","_ref","obj","TypeError","_objectDestructuringEmpty","messages","messagesAnchorRef","_useState","_useState2","isAutoScroll","setIsAutoScroll","_messagesAnchorRef$cu","current","scrollIntoView","behavior","style","height","overflowY","onScroll","e","element","currentTarget","Math","abs","scrollHeight","scrollTop","clientHeight","map","m","index","Message","message","id","ref","a","memo","_ref2","console","log","src","photo","width","userName","_useState3","_useState4","setMessage","onChange","value","disabled","onClick"],"mappings":"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"},"input":"(this[\"webpackJsonpmy-app\"] = this[\"webpackJsonpmy-app\"] || []).push([[6],{\n\n/***/ 348:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 1 modules\nvar slicedToArray = __webpack_require__(6);\n\n// CONCATENATED MODULE: ./node_modules/@babel/runtime/helpers/esm/objectDestructuringEmpty.js\nfunction _objectDestructuringEmpty(obj) {\n  if (obj == null) throw new TypeError(\"Cannot destructure undefined\");\n}\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(0);\nvar react_default = /*#__PURE__*/__webpack_require__.n(react);\n\n// EXTERNAL MODULE: ./node_modules/react-redux/es/index.js + 23 modules\nvar es = __webpack_require__(16);\n\n// EXTERNAL MODULE: ./src/redux/chat-reducer.ts + 1 modules\nvar chat_reducer = __webpack_require__(112);\n\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(2);\n\n// CONCATENATED MODULE: ./src/Pages/Chat/ChatPage.tsx\nvar ChatPage_ChatPage=function ChatPage(){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ChatPage_Chat,{})});};var ChatPage_Chat=function Chat(){var dispatch=Object(es[\"c\" /* useDispatch */])();var status=Object(es[\"d\" /* useSelector */])(function(state){return state.chat.status;});Object(react[\"useEffect\"])(function(){dispatch(Object(chat_reducer[\"c\" /* startMessagesListening */])());return function(){dispatch(Object(chat_reducer[\"d\" /* stopMessagesListening */])());};},[]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{children:[status==='error'&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:\"Some error occured. Please refresh the page\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ChatPage_Messages,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ChatPage_AddMessageForm,{})]})]});};var ChatPage_Messages=function Messages(_ref){_objectDestructuringEmpty(_ref);var messages=Object(es[\"d\" /* useSelector */])(function(state){return state.chat.messages;});var messagesAnchorRef=Object(react[\"useRef\"])(null);var _useState=Object(react[\"useState\"])(true),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),isAutoScroll=_useState2[0],setIsAutoScroll=_useState2[1];var scrollHandler=function scrollHandler(e){var element=e.currentTarget;if(Math.abs(element.scrollHeight-element.scrollTop-element.clientHeight)<300){!isAutoScroll&&setIsAutoScroll(true);}else{isAutoScroll&&setIsAutoScroll(false);}};Object(react[\"useEffect\"])(function(){if(isAutoScroll){var _messagesAnchorRef$cu;(_messagesAnchorRef$cu=messagesAnchorRef.current)===null||_messagesAnchorRef$cu===void 0?void 0:_messagesAnchorRef$cu.scrollIntoView({behavior:'smooth'});}},[messages]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{style:{height:'400px',overflowY:'auto'},onScroll:scrollHandler,children:[messages.map(function(m,index){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Message,{message:m},m.id);}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{ref:messagesAnchorRef})]});};var Message=/*#__PURE__*/react_default.a.memo(function(_ref2){var message=_ref2.message;console.log(\">>>>>>Message\");return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{src:message.photo,style:{width:'30px'}}),\" \",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{children:message.userName}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"br\",{}),message.message,/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"hr\",{})]});});var ChatPage_AddMessageForm=function AddMessageForm(){var _useState3=Object(react[\"useState\"])(''),_useState4=Object(slicedToArray[\"a\" /* default */])(_useState3,2),message=_useState4[0],setMessage=_useState4[1];var dispatch=Object(es[\"c\" /* useDispatch */])();var status=Object(es[\"d\" /* useSelector */])(function(state){return state.chat.status;});var sendMessageHandler=function sendMessageHandler(){if(!message){return;}dispatch(Object(chat_reducer[\"b\" /* sendMessages */])(message));setMessage('');};return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"textarea\",{onChange:function onChange(e){return setMessage(e.currentTarget.value);},value:message})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{disabled:status!=='ready',onClick:sendMessageHandler,children:\"Send\"})})]});};/* harmony default export */ var Chat_ChatPage = __webpack_exports__[\"default\"] = (ChatPage_ChatPage);\n\n/***/ })\n\n}]);","inputSourceMap":{"version":3,"sources":["D:\\REact\\01_first\\interview\\node_modules\\@babel\\runtime\\helpers\\esm\\objectDestructuringEmpty.js","D:/REact/01_first/interview/src/Pages/Chat/ChatPage.tsx"],"names":["ChatPage","Chat","dispatch","useDispatch","status","useSelector","state","chat","useEffect","startMessagesListening","stopMessagesListening","Messages","messages","messagesAnchorRef","useRef","useState","isAutoScroll","setIsAutoScroll","scrollHandler","e","element","currentTarget","Math","abs","scrollHeight","scrollTop","clientHeight","current","scrollIntoView","behavior","height","overflowY","map","m","index","id","Message","React","memo","message","console","log","photo","width","userName","AddMessageForm","setMessage","sendMessageHandler","sendMessages","value"],"mappings":"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","file":"x","sourcesContent":["export default function _objectDestructuringEmpty(obj) {\n  if (obj == null) throw new TypeError(\"Cannot destructure undefined\");\n}","import React, {useEffect, useRef, useState} from 'react'\r\nimport {ChatMessageAPIType} from '../../api/chat-api'\r\nimport {useDispatch, useSelector} from 'react-redux'\r\nimport {sendMessages, startMessagesListening, stopMessagesListening} from '../../redux/chat-reducer'\r\nimport {AppStateType} from '../../redux/redux-store'\r\n\r\n\r\nconst ChatPage: React.FC = () => {\r\n    return <div>\r\n        <Chat/>\r\n    </div>\r\n}\r\n\r\nconst Chat: React.FC = () => {\r\n\r\n    const dispatch = useDispatch()\r\n\r\n\r\n    const status = useSelector((state: AppStateType) => state.chat.status)\r\n\r\n    useEffect(() => {\r\n        dispatch(startMessagesListening())\r\n        return () => {\r\n            dispatch(stopMessagesListening())\r\n        }\r\n    }, [])\r\n\r\n    return <div>\r\n        {status === 'error' && <div>Some error occured. Please refresh the page</div>}\r\n        <>\r\n            <Messages/>\r\n            <AddMessageForm/>\r\n        </>\r\n    </div>\r\n}\r\n\r\nconst Messages: React.FC<{}> = ({}) => {\r\n    const messages = useSelector((state: AppStateType) => state.chat.messages)\r\n    const messagesAnchorRef = useRef<HTMLDivElement>(null);\r\n    const [isAutoScroll, setIsAutoScroll] = useState(true)\r\n\r\n    const scrollHandler = (e: React.UIEvent<HTMLDivElement, UIEvent>) => {\r\n        const element = e.currentTarget;\r\n        if (Math.abs( (element.scrollHeight - element.scrollTop) - element.clientHeight ) < 300)\r\n        {\r\n            !isAutoScroll && setIsAutoScroll(true)\r\n        } else {\r\n            isAutoScroll && setIsAutoScroll(false)\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (isAutoScroll) {\r\n            messagesAnchorRef.current?.scrollIntoView({behavior: 'smooth'})\r\n        }\r\n    }, [messages])\r\n\r\n    return <div style={{height: '400px', overflowY: 'auto'}} onScroll={scrollHandler}>\r\n        {messages.map((m, index) => <Message key={m.id} message={m}/>)}\r\n        <div ref={messagesAnchorRef}></div>\r\n    </div>\r\n}\r\n\r\n\r\nconst Message: React.FC<{ message: ChatMessageAPIType }> = React.memo( ({message}) => {\r\n    console.log(\">>>>>>Message\")\r\n    return <div>\r\n        <img src={message.photo} style={{width: '30px'}}/> <b>{message.userName}</b>\r\n        <br/>\r\n        {message.message}\r\n        <hr/>\r\n    </div>\r\n})\r\n\r\n\r\nconst AddMessageForm: React.FC<{}> = () => {\r\n    const [message, setMessage] = useState('')\r\n    const dispatch = useDispatch()\r\n\r\n    const status = useSelector((state: AppStateType) => state.chat.status)\r\n\r\n\r\n    const sendMessageHandler = () => {\r\n        if (!message) {\r\n            return\r\n        }\r\n        dispatch(sendMessages(message))\r\n        setMessage('')\r\n    }\r\n\r\n    return <div>\r\n        <div>\r\n            <textarea onChange={(e) => setMessage(e.currentTarget.value)} value={message}></textarea>\r\n        </div>\r\n        <div>\r\n            <button disabled={status !== 'ready'} onClick={sendMessageHandler}>Send</button>\r\n        </div>\r\n    </div>\r\n}\r\n\r\nexport default ChatPage\r\n"]}}